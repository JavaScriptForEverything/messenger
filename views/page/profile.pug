extends ../layout
block body
block script
	script( defer type='module' src='/js/page/profile.js')
	//- script( defer src="/js/plugins/cropper/cropper.min.js") 

	//- To prevent XSS attack on inline script
	script(nonce=cspNonce).
		const logedInUser = !{logedInUserJs} 		// pass logedInUser to client-side too

	- const fullName = `${logedInUser.firstName} ${logedInUser.lastName}`
	div(class='min-h-screen container mx-auto font-roboto')
		div(class='relative w-full md:w-3/4 mx-auto border-x border-slate-200 rounded-md')
			img( name='cover-photo' src=logedInUser.coverPhoto || '/images/users/coverPhoto.png'
				class='h-48 w-full object-cover'
				)
			button(name='cover-photo-edit-button'
				class=' bg-slate-50 text-blue-500 shadow rounded-full p-1 '
				class='absolute right-3 top-3 hover:scale-105 transition-transform duration-75'
				)
				<svg class='w-6 h-6 pointer-events-none' xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="m14.06 9.02l.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83l3.75 3.75l1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"/></svg>

			div(class='flex justify-between items-start gap-2 pb-2  border border-slate-200')
				div(class='relative flex-1 px-2')

					div(
						class='border border-blue-500 rounded-full'
						class='absolute h-20 w-20 -mt-10 overflow-hidden'
						class='group'
						)
						img( name='avatar'
							src=logedInUser.avatar || '/images/users/default.jpg'
							class=' rounded-full object-cover border-2 border-slate-50 shadow'
						)
						button(name='avatar-edit-button'
							class='absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2'
							class='bg-blue-400/50 p-20 text-blue-700'
							class='opacity-0 group-hover:opacity-100 transition-opacity duration-100'
						)
							<svg class='w-14 h-14 pointer-events-none' xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M4 4h3l2-2h6l2 2h3a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m8 3a5 5 0 0 0-5 5a5 5 0 0 0 5 5a5 5 0 0 0 5-5a5 5 0 0 0-5-5m0 2a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3"/></svg>


					div(class='pt-10 flex flex-col gap-0.5 text-slate-500')
						p(class='text-slate-700 font-semibold capitalize') #{fullName}
						p(class='') @#{logedInUser.username || fullName.replace(' ', '')}

						div(class='flex gap-2 items-center')
							p
								span(class='text-slate-900') 1 
								a(href='#') following 
							p
								span(class='text-slate-900') 2 
								a(href='#') followers

				div(class='flex gap-2 pr-2 pt-2')
					//- if has .active class then toggle style
					button( name='goto-message'
						class='text-blue-500'
						class='border border-blue-500 px-3 rounded-full'
						class='hover:text-blue-600 hover:border-blue-600 active:bg-blue-100'
						class='[&.active]:bg-blue-500 [&.active]:text-slate-50'
						class='[&.active]:hover:bg-blue-500/95 [&.active]:active:bg-blue-500/80'
						) 
						<svg class=' w-8 h-8 pointer-events-none' xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor"><rect width="16" height="12" x="4" y="6" rx="2"/><path d="m4 9l7.106 3.553a2 2 0 0 0 1.788 0L20 9"/></g></svg>

					//- if has .active class then toggle style
					button( name='follow-unfollow'
						class='text-blue-500'
						class='border border-blue-500 px-5 py-1 rounded-full'
						class='hover:text-blue-600 hover:border-blue-600 active:bg-blue-100'
						class='[&.active]:bg-blue-500 [&.active]:text-slate-50'
						class='[&.active]:hover:bg-blue-500/95 [&.active]:active:bg-blue-500/80'
						) follow

		div hi
		//- div( name='drag-and-drop-panel'
			class='flex justify-center items-center absolute right-0 bottom-10'
			class='peer-checked/attachment-icon-button:block'
			class='min-w-96 text-slate-500 bg-slate-100'
			)
			div(name='drag-and-drop-container'
				class='min-h-48 bg-slate-50 border border-slate-200'
				class='flex-1 flex flex-col justify-center items-center gap-1'
				)
				span
					<svg class='w-8 h-8' xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.65-4.96M19 18H6c-2.21 0-4-1.79-4-4c0-2.05 1.53-3.76 3.56-3.97l1.07-.11l.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5l1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3M8 13h2.55v3h2.9v-3H16l-4-4z"/></svg>
				p(name='drop-text' class='text-slate-800 ') 
					span Drag and drop files or 
					input(type='file' multiple id='drag-and-drop-file' hidden)
					label(for='drag-and-drop-file' 
						class='underline decoration-dotted'
						class='hover:text-slate-900 cursor-pointer'
						class=''
						) Browse

				p(name='drop-text' class='text-xs') Supported formats: JPG, JPEG, PNG
				p(name='drop-text' class='text-xs') File size: 5.5 MB

			//- div(name='drop-list-container'
				class='mt-1 bg-slate-50 border border-slate-200 '
				class='max-h-60 overflow-y-scroll'
				)

		input(type='file' id='camera-icon-button' hidden accept='image/*')
		label(for='camera-icon-button' type='button'
			class='text-slate-500/80 rounded-full'
			class='hover:bg-slate-50 hover:text-slate-500'
			class='cursor-pointer peer-checked/camera-icon-button:text-slate-600'
			)
			<svg class='w-6 h-6 pointer-events-none' xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M20 4h-3.17L15 2H9L7.17 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m0 14H4V6h4.05l1.83-2h4.24l1.83 2H20zM12 7a5 5 0 0 0-5 5a5 5 0 0 0 5 5a5 5 0 0 0 5-5a5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3a3 3 0 0 1 3-3a3 3 0 0 1 3 3a3 3 0 0 1-3 3"/></svg>


	